---
title: DNS Labels
description: Labelgate DNS 标签属性的完整参考。
---

## Format

```
labelgate.dns.<service_name>.<property>=<value>
```

## Properties

| Property | Required | Default | Description |
|----------|----------|---------|-------------|
| `hostname` | Yes | - | Full domain name for the DNS record |
| `type` | No | `A` | Record type: `A`, `AAAA`, `CNAME`, `TXT`, `MX`, `SRV`, `CAA` |
| `target` | No | `auto` | Record value. `auto` = detect public IP, `container` = container IP |
| `proxied` | No | `true` | Enable Cloudflare proxy (orange cloud) |
| `ttl` | No | `auto` | TTL in seconds. `auto` when proxied |
| `credential` | No | `default` | Credential name to use |
| `cleanup` | No | `false` | Delete record when container stops |
| `comment` | No | - | DNS record comment |
| `priority` | No | - | Priority (required for MX, SRV) |
| `access` | No | - | Access policy name to apply |

## Record Types

### A / AAAA Records

将 hostname 指向一个 IP 地址。

```yaml
labels:
  labelgate.dns.web.hostname: "app.example.com"
  labelgate.dns.web.type: "A"
  labelgate.dns.web.target: "203.0.113.1"
  labelgate.dns.web.proxied: "true"
```

**Special `target` values:**
- `auto` - Automatically detect the host's public IP address
- `container` - Use the container's internal IP address
- Any valid IPv4 (A) or IPv6 (AAAA) address

### CNAME Records

创建指向另一个 hostname 的别名。

```yaml
labels:
  labelgate.dns.www.hostname: "www.example.com"
  labelgate.dns.www.type: "CNAME"
  labelgate.dns.www.target: "example.com"
```

### TXT Records

添加文本记录（SPF、DKIM、验证等）。

```yaml
labels:
  labelgate.dns.spf.hostname: "example.com"
  labelgate.dns.spf.type: "TXT"
  labelgate.dns.spf.target: "v=spf1 include:_spf.google.com ~all"
```

### MX Records

配置邮件交换记录。需要 `priority`。

```yaml
labels:
  labelgate.dns.mail.hostname: "example.com"
  labelgate.dns.mail.type: "MX"
  labelgate.dns.mail.target: "mail.provider.com"
  labelgate.dns.mail.priority: "10"
```

### SRV Records

服务位置记录。需要 `priority`、`weight` 和 `port`。

```yaml
labels:
  labelgate.dns.xmpp.hostname: "_xmpp._tcp.example.com"
  labelgate.dns.xmpp.type: "SRV"
  labelgate.dns.xmpp.target: "xmpp.example.com"
  labelgate.dns.xmpp.priority: "10"
  labelgate.dns.xmpp.weight: "5"
  labelgate.dns.xmpp.port: "5222"
```

### CAA Records

证书颁发机构授权记录。

```yaml
labels:
  labelgate.dns.caa.hostname: "example.com"
  labelgate.dns.caa.type: "CAA"
  labelgate.dns.caa.target: "letsencrypt.org"
  labelgate.dns.caa.flags: "0"
  labelgate.dns.caa.tag: "issue"
```

## Examples

### Multiple DNS records from one container

```yaml
services:
  myapp:
    image: myapp:latest
    labels:
      labelgate.dns.root.hostname: "example.com"
      labelgate.dns.root.type: "A"
      labelgate.dns.root.target: "auto"

      labelgate.dns.www.hostname: "www.example.com"
      labelgate.dns.www.type: "CNAME"
      labelgate.dns.www.target: "example.com"

      labelgate.dns.mail.hostname: "example.com"
      labelgate.dns.mail.type: "MX"
      labelgate.dns.mail.target: "mail.example.com"
      labelgate.dns.mail.priority: "10"
```

### Auto-cleanup for temporary environments

```yaml
services:
  preview:
    image: preview:latest
    labels:
      labelgate.dns.preview.hostname: "preview.example.com"
      labelgate.dns.preview.target: "auto"
      labelgate.dns.preview.cleanup: "true"
```
